基本实现了描述的三个版本的功能，并且服务器关闭时所有客户端也自动关闭

